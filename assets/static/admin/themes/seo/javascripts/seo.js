"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){"use script";function s(i,n){this.$element=t(i),this.options=t.extend({},s.DEFAULTS,t.isPlainObject(n)&&n),this.focusedInputID="",this.init()}var i="qor.seo",n="enable."+i,o="disable."+i,e="click."+i,u="blur."+i,r=".qor-seo-submit",a=".qor-seo-tag",f=".qor-seo-input-field",c=".qor-seo__defaults-input",d=".qor-seo__settings";return s.prototype={constructor:s,init:function(){var t=this.$element;this.$submit=t.find(r),this.$addTgas=t.find(a),this.$tagInputs=t.find(f),this.$settingInput=t.find(c),this.bind()},bind:function(){this.$submit.on(e,t.proxy(this.submitSeo,this)),this.$tagInputs.on("click keyup",t.proxy(this.tagInputsFocus,this)),this.$tagInputs.on(u,t.proxy(this.tagInputsBlur,this)),this.$settingInput.on(e,t.proxy(this.toggleDefault,this)),this.$addTgas.on(e,t.proxy(this.addTags,this))},unbind:function(){this.$submit.off(e,t.proxy(this.submitSeo,this)),this.$tagInputs.off("click keyup",t.proxy(this.tagInputsFocus,this)),this.$tagInputs.off(u,t.proxy(this.tagInputsBlur,this)),this.$settingInput.off(e,t.proxy(this.toggleDefault,this)),this.$addTgas.off(e,t.proxy(this.addTags,this))},toggleDefault:function(){var s=this.$settingInput.is(":checked"),i=t(d);s?i.hide():i.show()},tagInputsFocus:function(){this.$addTgas.addClass("focus");var s=t(document.activeElement);this.focusedInputID=s.prop("id"),this.focusedInputStart=s[0].selectionStart,this.focusedInputEnd=s[0].selectionEnd,this.focusedInputVal=s.val()},tagInputsBlur:function(){this.$addTgas.removeClass("focus"),this.$focusedInputID=!1},addTags:function(s){if(this.focusedInputID){var i="",n=this.focusedInputVal.substring(0,this.focusedInputStart),o=this.focusedInputVal.substring(this.focusedInputEnd,this.focusedInputVal.length),e="{{"+t(s.currentTarget).data("tagValue")+"}}";i=n+e+o,t("#"+this.focusedInputID).val(i).focus()}},submitSeo:function(){var s=this.$element,i=s.find(".qor-form");return t.ajax({method:"POST",url:i.attr("action"),data:new FormData(i[0]),processData:!1,contentType:!1,dataType:"json",success:function(){window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null,t(".qor-alert--success").show(),setTimeout(function(){t(".qor-alert--success").hide()},3e3)},error:function(){t(".qor-alert--error").show()}}),!1},destroy:function(){this.unbind(),this.$element.removeData(i)}},s.DEFAULTS={},s.plugin=function(n){return this.each(function(){var o,e=t(this),u=e.data(i);if(!u){if(/destroy/.test(n))return;e.data(i,u=new s(this,n))}"string"==typeof n&&t.isFunction(o=u[n])&&o.apply(u)})},t(function(){var i='[data-toggle="qor.seo"]',e={};t(document).on("click.qor.fixedAlert",'[data-dismiss="fixed-alert"]',function(){t(this).closest(".qor-alert").hide()}).on(o,function(n){s.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){s.plugin.call(t(i,n.target),e)}).triggerHandler(n)}),s});